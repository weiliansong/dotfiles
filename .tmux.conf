# fixes tmux and vim mouse issue
set -g mouse on

# copy mode to vi bindings
setw -g mode-keys vi
bind-key -T copy-mode-vi 'v' send -X begin-selection
bind-key -T copy-mode-vi 'y' send -X copy-selection-and-cancel
bind-key -T copy-mode-vi 'r' send -X rectangle-toggle

# remap prefix from 'C-b' to 'C-a'
unbind C-b
set-option -g prefix M-e
bind-key M-e send-prefix

# Commands to reorder windows
bind-key -n C-S-Left swap-window -t -1
bind-key -n C-S-Right swap-window -t +1

# remove the annoying delay of esc key
set -s escape-time 0

# split panes using | and -, with PWD starting directory
bind | split-window -h -c "#{pane_current_path}"
bind - split-window -v -c "#{pane_current_path}"
unbind '"'
unbind %

# New window has the same directory as the current one
bind c new-window -c "#{pane_current_path}"

# reload config file (change file location to your the tmux.conf you want to use)
bind r source-file ~/.tmux.conf

# switch panes using Alt-arrow without prefix
bind -n M-y select-pane -L
bind -n M-o select-pane -R
bind -n M-i select-pane -U
bind -n M-u select-pane -D

# switch windows using Alt-j/k without prefix
bind -n M-j select-window -p
bind -n M-k select-window -n

# Enable mouse control (clickable windows, panes, resizable panes)
set -g mouse on

# don't rename windows automatically
set-option -g allow-rename off

# #### COLOUR (Solarized dark)
# 
# # default statusbar colors
# set-option -g status-bg black #base02
# set-option -g status-fg yellow #yellow
# set-option -g status-attr default
# 
# # default window title colors
# set-window-option -g window-status-fg brightblue #base0
# set-window-option -g window-status-bg default
# #set-window-option -g window-status-attr dim
# 
# # active window title colors
# set-window-option -g window-status-current-fg brightred #orange
# set-window-option -g window-status-current-bg default
# #set-window-option -g window-status-current-attr bright
# 
# # pane border
# set-option -g pane-border-fg black #base02
# set-option -g pane-active-border-fg brightgreen #base01
# 
# # message text
# set-option -g message-bg black #base02
# set-option -g message-fg brightred #orange
# 
# # pane number display
# set-option -g display-panes-active-colour blue #blue
# set-option -g display-panes-colour brightred #orange
# 
# # clock
# set-window-option -g clock-mode-colour green #green
# 
# # bell
# set-window-option -g window-status-bell-style fg=black,bg=red #base02, red

#### COLOUR (Solarized light)

# default statusbar colors
set-option -g status-style fg=yellow,bg=white #yellow and base2

# default window title colors
set-window-option -g window-status-style fg=brightyellow,bg=default #base0 and default
#set-window-option -g window-status-style dim

# active window title colors
set-window-option -g window-status-current-style fg=brightred,bg=default #orange and default
#set-window-option -g window-status-current-style bright

# pane border
set-option -g pane-border-style fg=white #base2
set-option -g pane-active-border-style fg=brightcyan #base1

# message text
set-option -g message-style fg=brightred,bg=white #orange and base2

# pane number display
set-option -g display-panes-active-colour blue #blue
set-option -g display-panes-colour brightred #orange

# clock
set-window-option -g clock-mode-colour green #green

# bell
set-window-option -g window-status-bell-style fg=white,bg=red #base2, red

# tmux resurrect
run-shell ~/software/tmux-resurrect/resurrect.tmux

# tmux continuum
run-shell ~/software/tmux-continuum/continuum.tmux
set -g status-right '#H | %H:%M '
set -g @continuum-boot 'on'

# Custom tmux status line
# setw -g pane-border-status off
# set -g status-position bottom

# Allows for nested tmux sessions
# bind -T root F12  \
#   set prefix None \;\
#   set key-table off \;\
#   if -F '#{pane_in_mode}' 'send-keys -X cancel' \;\
#   refresh-client -S \;\
# 
# bind -T off F12 \
#   set -u prefix \;\
#   set -u key-table \;\
#   refresh-client -S
# 
# wg_is_keys_off="#[fg=$color_light,bg=$color_window_off_indicator]#([ $(tmux show-option -qv key-table) = 'off' ] && echo 'OFF')#[default]"
# 
# set -g status-right "$wg_is_keys_off #H | %H:%M "
# setw -g pane-border-status top
# setw -g pane-border-format 'â”€'
